{"version":3,"file":"manipulate.cjs","sources":["../src/manipulate.js"],"sourcesContent":["import { createFilter } from \"@rollup/pluginutils\";\nimport MagicString from \"magic-string\";\n\nconst manipulate = (options={}) => {\n    \n    /*\n    if (!opts.include) {\n        throw Error(\"include option must be specified\");\n    }\n    */\n\n    if (!options.fn) {\n        throw Error(\"A function must be specified\");\n    }\n\n    const filter = createFilter(options.include, options.exclude);\n\n    return {\n        name: \"manipulate\",\n\n        transform(source, id) {\n            if (filter(id)) {\n                \n                const code = options.fn(source);\n                \n                let map;\n\n                if (options.sourceMap !== false && options.sourcemap !== false) {\n                    const ms = new MagicString(code);\n                    map = ms.generateMap({ hires: true });\n                }\n\n                return { code, map };\n            }\n        }\n    };\n}\n\nexport { manipulate };\n"],"names":["createFilter","MagicString"],"mappings":";;;;;;;;;;;AAGK,MAAC,UAAU,GAAG,CAAC,OAAO,CAAC,EAAE,KAAK;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAI,CAAC,OAAO,CAAC,EAAE,EAAE;AACrB,QAAQ,MAAM,KAAK,CAAC,8BAA8B,CAAC,CAAC;AACpD,KAAK;AACL;AACA,IAAI,MAAM,MAAM,GAAGA,wBAAY,CAAC,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,OAAO,CAAC,CAAC;AAClE;AACA,IAAI,OAAO;AACX,QAAQ,IAAI,EAAE,YAAY;AAC1B;AACA,QAAQ,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE;AAC9B,YAAY,IAAI,MAAM,CAAC,EAAE,CAAC,EAAE;AAC5B;AACA,gBAAgB,MAAM,IAAI,GAAG,OAAO,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AAChD;AACA,gBAAgB,IAAI,GAAG,CAAC;AACxB;AACA,gBAAgB,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,IAAI,OAAO,CAAC,SAAS,KAAK,KAAK,EAAE;AAChF,oBAAoB,MAAM,EAAE,GAAG,IAAIC,+BAAW,CAAC,IAAI,CAAC,CAAC;AACrD,oBAAoB,GAAG,GAAG,EAAE,CAAC,WAAW,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC1D,iBAAiB;AACjB;AACA,gBAAgB,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC;AACrC,aAAa;AACb,SAAS;AACT,KAAK,CAAC;AACN;;;;"}